<!DOCTYPE html>
<html>
  <head>
    
    <title>PGO: PostgreSQL Operator from Crunchy Data Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.55.6" />
<title>Setup TLS :: PGO: PostgreSQL Operator from Crunchy Data Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/postgres-operator/4.7.7/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/postgres-operator/4.7.7/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/4.7.7/theme-flex/style.css" rel="stylesheet">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://crunchydata.github.io/postgres-operator/4.7.7/css/Fort-Fonts.css" rel="stylesheet">
<link href="https://crunchydata.github.io/postgres-operator/4.7.7/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<script src="https://crunchydata.github.io/postgres-operator/4.7.7/js/jquery-2.x.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.bundle.min.js" integrity="sha384-zDnhMsjVZfS3hiP7oCBRmfjkQC4fzxVxFhBx8Hkz2aZX8gEvA/jsP3eXRCvzTofP" crossorigin="anonymous"></script>
<script src="https://crunchydata.github.io/postgres-operator/4.7.7/js/main.js"></script>
<script src="https://crunchydata.github.io/postgres-operator/4.7.7/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/4.7.7";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/tutorial/tls/">
    
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  
<a class="navbar-brand" href="https://www.crunchydata.com/"><img alt="Crunchy Data" src="https://crunchydata.github.io/postgres-operator/4.7.7/images/logo.svg"></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <ul class="navbar-nav mr-auto"></ul>
  <span class="navbar-text">
      <nav class="shortcuts">
              <li class="" role="">
                  <a href="https://crunchydata.github.io/postgres-operator/4.7.7/" target="_blank" rel="noopener">
                    <label>Overview</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/postgres-operator" target="_blank" rel="noopener">
                    <i class='fab fa-github'></i> <label>Source</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://kubernetes.io/docs/" target="_blank" rel="noopener">
                    <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/postgres-operator/blob/master/LICENSE.md" target="_blank" rel="noopener">
                    <i class='fas fa-file-contract'></i> <label>License</label>
                  </a>
              </li>
      </nav>
  </span>
</nav>

<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/4.7.7/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/4.7.7/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/postgres-operator/4.7.7/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/postgres-operator\/4.7.7";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/postgres-operator/4.7.7/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/postgres-operator/4.7.7/">PGO: PostgreSQL Operator from Crunchy Data Documentation</a>
      <hr>
        <b>Available Formats</b>
        <nav class="downloads">
                <li class="" role="">
                    <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pdf/postgres_operator.pdf" target="_blank" rel="noopener">
                      <i class='fas fa-file-pdf'></i> <label>PDF</label>
                    </a>
                </li>
                <li class="" role="">
                    <a href="https://crunchydata.github.io/postgres-operator/4.7.7/epub/postgres_operator.epub" target="_blank" rel="noopener">
                      <i class='fas fa-book'></i> <label>EPUB</label>
                    </a>
                </li>
        </nav>
        <hr>

      <b>Navigation</b>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/quickstart/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/quickstart/">Quickstart</a>

      </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/">Tutorial</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/getting-started/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/getting-started/">
            Getting Started
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/create-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/create-cluster/">
            Create a Postgres Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/connect-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/connect-cluster/">
            Connect to a Postgres Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/customize-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/customize-cluster/">
            Customize a Postgres Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/update-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/update-cluster/">
            Update a Postgres Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/delete-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/delete-cluster/">
            Delete a Postgres Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/tls/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/tls/">
            Setup TLS
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgbouncer/">
            pgBouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/high-availability/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/high-availability/">
            High Availability
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/disaster-recovery/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/disaster-recovery/">
            Disaster Recovery
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgdump/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgdump/">
            Logical Backups (pg_dump)
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/">Architecture</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/overview/">
            Overview
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/provisioning/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/provisioning/">
            Provisioning
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/disaster-recovery/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/disaster-recovery/">
            Disaster Recovery
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/high-availability/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/high-availability/">High-Availability</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/high-availability/multi-cluster-kubernetes/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/high-availability/multi-cluster-kubernetes/">
            Kubernetes Multi-Cluster Deployments
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/monitoring/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/monitoring/">
            Monitoring
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/namespace/">
            Namespace Management
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/eventing/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/eventing/">
            Lifecycle Events
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/postgres-operator-containers-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/postgres-operator-containers-overview/">
            PostgreSQL Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/storage-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/storage-overview/">
            Storage
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/users-role-overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/users-role-overview/">
            User &amp; Roles
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/tablespaces/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/tablespaces/">
            Tablespaces
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/architecture/pgadmin4/">
            pgAdmin 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/">Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/compatibility/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/compatibility/">
            Compatibility Requirements
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/configuration/">
            Configuration Resources
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/pgo-yaml-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/pgo-yaml-configuration/">
            PGO YAML
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/tls/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/configuration/tls/">
            TLS
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/">Installation</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/prerequisites/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/prerequisites/">
            Prerequisites
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/postgres-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/postgres-operator/">
            Install PGO the Postgres Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/pgo-client/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/pgo-client/">
            Install &#34;pgo&#34; Client
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/configuration/">
            Configuration Reference
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/">Other Methods</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/">Ansible</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/prerequisites/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/prerequisites/">
            Prerequisites
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/installing-ansible/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/installing-ansible/">
            Installing Ansible
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/installing-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/installing-operator/">
            Installing PostgreSQL Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/updating-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/updating-operator/">
            Updating PostgreSQL Operator
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/uninstalling-operator/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/ansible/uninstalling-operator/">
            Uninstalling PostgreSQL Operator
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/bash/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/bash/">
            Bash Scripts
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/helm/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/helm/">
            Helm Chart
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/google-cloud-marketplace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/google-cloud-marketplace/">
            Google Cloud Marketplace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/operator-hub/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/other/operator-hub/">
            OperatorHub.io
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/">PostgreSQL Operator Monitoring</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/metrics-prerequisites/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/metrics-prerequisites/">
            Monitoring Prerequisites
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/postgres-operator-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/postgres-operator-metrics/">
            Install PostgreSQL Operator Monitoring
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/metrics-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/metrics-configuration/">
            Monitoring Configuration Reference
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/">Other Methods</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/">Ansible</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/metrics-prerequisites/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/metrics-prerequisites/">
            Metrics Prerequisites
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/installing-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/installing-metrics/">
            Installing the Monitoring Infrastructure
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/updating-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/updating-metrics/">
            Updating the Monitoring Infrastructure
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/uninstalling-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/ansible/uninstalling-metrics/">
            Uninstalling the Monitoring Infrastructure
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/helm-metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/installation/metrics/other/helm-metrics/">
            Monitoring Helm Chart
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/">Using the pgo Client</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/common-tasks/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/common-tasks/">
            Common pgo Client Tasks
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/">pgo Client Reference</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_apply/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_apply/">
            pgo apply
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_backup/">
            pgo backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_cat/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_cat/">
            pgo cat
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create/">
            pgo create
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_cluster/">
            pgo create cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_namespace/">
            pgo create namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgadmin/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgadmin/">
            pgo create pgadmin
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgbouncer/">
            pgo create pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgorole/">
            pgo create pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_pgouser/">
            pgo create pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_policy/">
            pgo create policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_schedule/">
            pgo create schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_user/">
            pgo create user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete/">
            pgo delete
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_backup/">
            pgo delete backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_cluster/">
            pgo delete cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_label/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_label/">
            pgo delete label
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_namespace/">
            pgo delete namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgadmin/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgadmin/">
            pgo delete pgadmin
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgbouncer/">
            pgo delete pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgorole/">
            pgo delete pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_pgouser/">
            pgo delete pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_policy/">
            pgo delete policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_schedule/">
            pgo delete schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_delete_user/">
            pgo delete user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_df/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_df/">
            pgo df
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_failover/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_failover/">
            pgo failover
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_label/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_label/">
            pgo label
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_reload/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_reload/">
            pgo reload
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_restart/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_restart/">
            pgo restart
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_restore/">
            pgo restore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_scale/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_scale/">
            pgo scale
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_scaledown/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_scaledown/">
            pgo scaledown
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show/">
            pgo show
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_backup/">
            pgo show backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_cluster/">
            pgo show cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_config/">
            pgo show config
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_namespace/">
            pgo show namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgadmin/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgadmin/">
            pgo show pgadmin
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgbouncer/">
            pgo show pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgorole/">
            pgo show pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pgouser/">
            pgo show pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_policy/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_policy/">
            pgo show policy
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pvc/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_pvc/">
            pgo show pvc
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_schedule/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_schedule/">
            pgo show schedule
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_user/">
            pgo show user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_workflow/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_show_workflow/">
            pgo show workflow
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_status/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_status/">
            pgo status
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_test/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_test/">
            pgo test
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update/">
            pgo update
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_cluster/">
            pgo update cluster
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_namespace/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_namespace/">
            pgo update namespace
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgbouncer/">
            pgo update pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgorole/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgorole/">
            pgo update pgorole
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgouser/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_pgouser/">
            pgo update pgouser
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_user/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_user/">
            pgo update user
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_upgrade/">
            pgo upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_version/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_version/">
            pgo version
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_watch/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_watch/">
            pgo watch
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/custom-resources/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/custom-resources/">Using Custom Resources</a>

      </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/security/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/security/">RBAC Configuration</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/security/configure-postgres-operator-rbac/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/security/configure-postgres-operator-rbac/">
            Configuration of PostgreSQL Operator RBAC
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/security/install-postgres-operator-rbac/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/security/install-postgres-operator-rbac/">
            Installation of PostgreSQL Operator RBAC
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/security/api-encryption-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/security/api-encryption-configuration/">
            PostgreSQL Operator API Encryption Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/">Advanced Topics</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/crunchy-postgres-exporter/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/crunchy-postgres-exporter/">
            Crunchy Postgres Exporter
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/custom-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/custom-configuration/">
            Custom Configuration
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/multi-zone-design-considerations/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/multi-zone-design-considerations/">
            Multi-Zone Cloud Considerations
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/direct-api-calls/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/direct-api-calls/">
            Rest API
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/">Upgrade</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/automatedupgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/automatedupgrade/">
            Automated PostgreSQL Operator Upgrade - Operator 4.1&#43;
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/">Manual Upgrades</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/upgrade35/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/upgrade35/">
            Manual Upgrade - Operator 3.5
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/upgrade4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/manual/upgrade4/">
            Manual Upgrade - Operator 4
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/upgrade/metrics/">
            Monitoring Upgrade Guidance
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/">Contributing</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/developer-setup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/developer-setup/">
            Development Environment
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/documentation-updates/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/documentation-updates/">
            Updating Documentation
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/issues/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/issues/">
            Submitting Issues
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/pull-requests/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/pull-requests/">
            Submitting Pull Requests
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/">Release Notes</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.7/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.7/">
            4.7.7
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.6/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.6/">
            4.7.6
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.5/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.5/">
            4.7.5
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.4/">
            4.7.4
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.3/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.3/">
            4.7.3
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.2/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.2/">
            4.7.2
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.1/">
            4.7.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.7.0/">
            4.7.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.2/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.2/">
            4.6.2
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.1/">
            4.6.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.6.0/">
            4.6.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.5.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.5.1/">
            4.5.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.5.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.5.0/">
            4.5.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.4.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.4.1/">
            4.4.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.4.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.4.0/">
            4.4.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.3/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.3/">
            4.3.3
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.2/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.2/">
            4.3.2
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.1/">
            4.3.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.3.0/">
            4.3.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.2/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.2/">
            4.2.2
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.1/">
            4.2.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.2.0/">
            4.2.0
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.2/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.2/">
            4.1.2
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.1/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.1/">
            4.1.1
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.0/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/postgres-operator/4.7.7/releases/4.1.0/">
            4.1.0
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/postgres-operator/4.7.7/support/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/postgres-operator/4.7.7/support/">Support</a>

      </div>
    </li>




      <hr><nav id="TableOfContents"></nav>



      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/quickstart/" >
   Quickstart</option>
    <option value="/tutorial/" >
   Tutorial</option> 
      <option value="/tutorial/getting-started/" >- Getting Started</option>
      <option value="/tutorial/create-cluster/" >- Create a Postgres Cluster</option>
      <option value="/tutorial/connect-cluster/" >- Connect to a Postgres Cluster</option>
      <option value="/tutorial/customize-cluster/" >- Customize a Postgres Cluster</option>
      <option value="/tutorial/update-cluster/" >- Update a Postgres Cluster</option>
      <option value="/tutorial/delete-cluster/" >- Delete a Postgres Cluster</option>
      <option value="/tutorial/tls/"  selected>- Setup TLS</option>
      <option value="/tutorial/pgbouncer/" >- pgBouncer</option>
      <option value="/tutorial/high-availability/" >- High Availability</option>
      <option value="/tutorial/disaster-recovery/" >- Disaster Recovery</option>
      <option value="/tutorial/pgdump/" >- Logical Backups (pg_dump)</option>
  
    <option value="/architecture/" >
   Architecture</option>
    <option value="/configuration/" >
   Configuration</option>
    <option value="/installation/" >
   Installation</option>
    <option value="/pgo-client/" >
   Using the pgo Client</option>
    <option value="/custom-resources/" >
   Using Custom Resources</option>
    <option value="/security/" >
   RBAC Configuration</option>
    <option value="/advanced/" >
   Advanced Topics</option>
    <option value="/upgrade/" >
   Upgrade</option>
    <option value="/contributing/" >
   Contributing</option>
    <option value="/releases/" >
   Release Notes</option>
    <option value="/support/" >
   Support</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/postgres-operator/4.7.7/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/postgres-operator/edit/master/docs/content/tutorial/tls.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/postgres-operator/4.7.7/'>PGO: The Postgres Operator from Crunchy Data</a> > <a href='https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/'>Tutorial</a> > Setup TLS

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>Setup TLS</h1>

    

    
    

<p>TLS allows secure TCP connections to PostgreSQL, and the PostgreSQL Operator makes it easy to enable this PostgreSQL feature. The TLS support in the PostgreSQL Operator does not make an opinion about your PKI, but rather loads in your TLS key pair that you wish to use for the PostgreSQL server as well as its corresponding certificate authority (CA) certificate. Both of these Secrets are
required to enable TLS support for your PostgreSQL cluster when using the PostgreSQL Operator, but it in turn allows seamless TLS support.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>There are three items that are required to enable TLS in your PostgreSQL clusters:</p>

<ul>
<li>A CA certificate</li>
<li>A TLS private key</li>
<li>A TLS certificate</li>
</ul>

<p>There are a variety of methods available to generate these items: in fact, Kubernetes comes with its own <a href="https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/">certificate management system</a>! It is up to you to decide how you want to manage this for your cluster. The PostgreSQL documentation also provides an example for how to <a href="https://blog.crunchydata.com/blog/tls-postgres-kubernetes-openssl">generate a TLS certificate</a> as well.</p>

<p>To set up TLS for your PostgreSQL cluster, you have to create two <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a>: one that contains the CA certificate, and the other that contains the server TLS key pair.</p>

<p>First, create the Secret that contains your CA certificate. Create the Secret as a generic Secret, and note that the following requirements <strong>must</strong> be met:</p>

<ul>
<li>The Secret must be created in the same Namespace as where you are deploying your PostgreSQL cluster</li>
<li>The <code>name</code> of the key that is holding the CA <strong>must</strong> be <code>ca.crt</code></li>
</ul>

<p>There are optional settings for setting up the CA secret:</p>

<ul>
<li>You can pass in a certificate revocation list (CRL) for the CA secret by passing in the CRL using the <code>ca.crl</code> key name in the Secret.</li>
</ul>

<p>For example, to create a CA Secret with the trusted CA to use for the PostgreSQL clusters, you could execute the following command:</p>

<pre><code>kubectl create secret generic postgresql-ca -n pgo --from-file=ca.crt=/path/to/ca.crt
</code></pre>

<p>To create a CA Secret that includes a CRL, you could execute the following command:</p>

<pre><code>kubectl create secret generic postgresql-ca -n pgo \
  --from-file=ca.crt=/path/to/ca.crt \
  --from-file=ca.crl=/path/to/ca.crl
</code></pre>

<p>Note that you can reuse this CA Secret for other PostgreSQL clusters deployed by the PostgreSQL Operator.</p>

<p>Next, create the Secret that contains your TLS key pair. Create the Secret as a a TLS Secret, and note the following requirement must be met:</p>

<ul>
<li><p>The Secret must be created in the same Namespace as where you are deploying your PostgreSQL cluster</p>

<pre><code>kubectl create secret tls hippo-tls-keypair -n pgo \
--cert=/path/to/server.crt \
--key=/path/to/server.key
</code></pre></li>
</ul>

<p>Now you can create a TLS-enabled PostgreSQL cluster!</p>

<h2 id="create-a-postgres-cluster-with-tls">Create a Postgres Cluster with TLS</h2>

<p>Using the above example, to create a TLS-enabled PostgreSQL cluster that can accept both TLS and non-TLS connections, execute the following command:</p>

<pre><code>pgo create cluster hippo \
  --server-ca-secret=postgresql-ca \
  --server-tls-secret=hippo-tls-keypair
</code></pre>

<p>Including the <code>--server-ca-secret</code> and <code>--server-tls-secret</code> flags automatically enable TLS connections in the PostgreSQL cluster that is deployed. These flags should reference the CA Secret and the TLS key pair Secret, respectively.</p>

<p>If deployed successfully, when you connect to the PostgreSQL cluster, assuming your <code>PGSSLMODE</code> is set to <code>prefer</code> or higher, you will see something like this in your <code>psql</code> terminal:</p>

<pre><code>SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
</code></pre>

<h2 id="force-tls-for-all-connections">Force TLS For All Connections</h2>

<p>There are many environments where you want to force all remote connections to occur over TLS, for example, if you deploy your PostgreSQL cluster&rsquo;s in a public cloud or on an untrusted network. The PostgreSQL Operator lets you force all remote connections to occur over TLS by using the <code>--tls-only</code> flag.</p>

<p>For example, using the setup above, you can force TLS in a PostgreSQL cluster by executing the following command:</p>

<pre><code>pgo create cluster hippo \
  --tls-only \
  --server-ca-secret=postgresql-ca --server-tls-secret=hippo-tls-keypair
</code></pre>

<p>If deployed successfully, when you connect to the PostgreSQL cluster, assuming your <code>PGSSLMODE</code> is set to <code>prefer</code> or higher, you will see something like this in your <code>psql</code> terminal:</p>

<pre><code>SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
</code></pre>

<p>If you try to connect to a PostgreSQL cluster that is deployed using the <code>--tls-only</code> with TLS disabled (i.e. <code>PGSSLMODE=disable</code>), you will receive an error that connections without TLS are unsupported.</p>

<h3 id="tls-authentication-for-replicas">TLS Authentication for Replicas</h3>

<p>PostgreSQL supports <a href="https://www.postgresql.org/docs/current/auth-cert.html">certificate-based authentication</a>, which allows for PostgreSQL to authenticate users based on the common name (CN) in a certificate. Using this feature, the PostgreSQL Operator allows you to configure PostgreSQL replicas in a cluster to authenticate using a certificate instead of a password.</p>

<p>To use this feature, first you will need to set up a Kubernetes TLS Secret that has a CN of <code>primaryuser</code>. If you do not wish to have this as your CN, you will need to map the CN of this certificate to the value of <code>primaryuser</code> using a <a href="https://www.postgresql.org/docs/current/auth-username-maps.html">pg_ident</a> username map, which you can configure as part of a <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/custom-configuration/">custom PostgreSQL configuration</a>.</p>

<p>You also need to ensure that the certificate is verifiable by the certificate authority (CA) chain that you have provided for your PostgreSQL cluster. The CA is provided as part of the <code>--server-ca-secret</code> flag in the <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_create_cluster/"><code>pgo create cluster</code></a> command.</p>

<p>To create a PostgreSQL cluster that uses TLS authentication for replication, first create Kubernetes Secrets for the server and the CA. For the purposes of this example, we will use the ones that were created earlier: <code>postgresql-ca</code> and <code>hippo-tls-keypair</code>. After generating a certificate that has a CN of <code>primaryuser</code>, create a Kubernetes Secret that references this TLS keypair called <code>hippo-tls-replication-keypair</code>:</p>

<pre><code>kubectl create secret tls hippo-tls-replication-keypair -n pgo \
  --cert=/path/to/replication.crt \
  --key=/path/to/replication.key
</code></pre>

<p>We can now create a PostgreSQL cluster and allow for it to use TLS authentication for its replicas! Let&rsquo;s create a PostgreSQL cluster with two replicas that also requires TLS for any connection:</p>

<pre><code>pgo create cluster hippo \
  --tls-only \
  --server-ca-secret=postgresql-ca \
  --server-tls-secret=hippo-tls-keypair \
  --replication-tls-secret=hippo-tls-replication-keypair \
  --replica-count=2
</code></pre>

<p>By default, the PostgreSQL Operator has each replica connect to PostgreSQL using a <a href="https://www.postgresql.org/docs/current/libpq-ssl.html#LIBPQ-SSL-SSLMODE-STATEMENTS">PostgreSQL TLS mode</a> of <code>verify-ca</code>. If you wish to perform TLS mutual authentication between PostgreSQL instances (i.e. certificate-based authentication with SSL mode of <code>verify-full</code>), you will need to create a <a href="https://crunchydata.github.io/postgres-operator/4.7.7/advanced/custom-configuration/">PostgreSQL custom configuration</a>.</p>

<h2 id="add-tls-to-an-existing-postgresql-cluster">Add TLS to an Existing PostgreSQL Cluster</h2>

<p>You can add TLS to an existing PostgreSQL cluster using the <a href="https://crunchydata.github.io/postgres-operator/4.7.7/pgo-client/reference/pgo_update_cluster/"><code>pgo update cluster</code></a> or by modifying the <code>pgclusters.crunchydata.com</code> custom resource directly. <code>pgo update cluster</code> provides several flags for TLS management, including:</p>

<ul>
<li><code>--disable-server-tls</code>: removes TLS from a cluster</li>
<li><code>--disable-tls-only</code>: removes the TLS-only requirement from a cluster</li>
<li><code>--enable-tls-only</code>: adds the TLS-only requirement to a cluster</li>
<li><code>--server-ca-secret</code>: combined with <code>--server-tls-secret</code>, enables TLS in a cluster</li>
<li><code>--server-tls-secret</code>: combined with <code>--server-ca-secret</code>, enables TLS in a cluster</li>
<li><code>--replication-tls-secret</code>: enables certificate-based authentication between Postgres instances.</li>
</ul>

<p>If you have an existing cluster named <code>hippo</code> that does not have TLS, and have a TLS keypair in a Secret named <code>hippo-tls-keypair</code> and a CA in a Secret name <code>postgresql-ca</code> and want to require all connections to use TLS, you could use the following command:</p>

<pre><code>pgo update cluster hippo \
  --enable-tls-only \
  --server-ca-secret=postgresql-ca \
  --server-tls-secret=hippo-tls-keypair
</code></pre>

<p>While PGO attempts to leave any <code>pg_hba.conf</code> customizations you have in place, there are circumstance where it can override them when enabling/disabling TLS. If you do have custom <code>pg_hba.conf</code> rules, after adding or removing TLS from an existing Posgres cluster, check your <code>pg_hba.conf</code> values to ensure it matches your expectations.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="replicas-cannot-connect-to-primary">Replicas Cannot Connect to Primary</h3>

<p>If your primary is forcing all connections over TLS, ensure that your replicas are connecting with a <code>sslmode</code> of <code>prefer</code> or higher.</p>

<p>If using TLS authentication with your replicas, ensure that the common name (<code>CN</code>) for the replicas is <code>primaryuser</code> or that you have set up an entry in <code>pg_ident</code> that provides a mapping from your <code>CN</code> to <code>primaryuser</code>.</p>

<h3 id="pg-hba-conf-values-have-changed-after-tls-update"><code>pg_hba.conf</code> Values Have Changed After TLS Update</h3>

<p>PGO will attempt to preserve all of your custom TLS rules, but there are cases where it may make modifications. This a normal part of adding/removing TLS from an existing Postgres cluster. You can safely update your <code>pg_hba.conf</code> rules after the TLS changes are completed, and they will be preserved.</p>

<h2 id="next-steps">Next Steps</h2>

<p>You&rsquo;ve now secured connections to your database. However, how do you scale and pool your PostgreSQL connections? Learn how to <a href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgbouncer/">set up and configure pgBouncer</a>!</p>



    
      <div class="chevrons">
  <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/delete-cluster/" title="Delete a Postgres Cluster"> <i class="fa fa-chevron-left"></i><label>Delete a Postgres Cluster</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/postgres-operator/4.7.7/tutorial/pgbouncer/" title="pgBouncer" style="margin-right: 0px;"><label>pgBouncer</label><i class="fa fa-chevron-right"></i></a></div>
</div>

</section>
</article>

<footer>

<div class="footline">
  

  



</div>


<div>
</div>

<div class="text-center">
  <p><small>&copy; 2017 - 2022 Crunchy Data Solutions, Inc.</small></p>
</div>


</footer>

<link href="https://crunchydata.github.io/postgres-operator/4.7.7/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/postgres-operator/4.7.7/js/featherlight.min.js"></script>

<script src="https://crunchydata.github.io/postgres-operator/4.7.7/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>
